import"../chunks/DsnmJJEf.js";import"../chunks/nVMnYrZ1.js";import{o as Z}from"../chunks/Cjn9CO99.js";import{av as aa,aw as C,ax as B,b as l,a as m,ay as ea,az as s,aA as i,s as r,K as c,aB as t,aF as sa}from"../chunks/qD57vNRg.js";import{e as p,s as W}from"../chunks/DJhX7ZAe.js";import{i as D}from"../chunks/DYzAGI7O.js";import{s as A,A as F,r as J}from"../chunks/BOyBn3DS.js";import{b as N}from"../chunks/BLNXZVOq.js";import{i as ta}from"../chunks/XiKBQBBS.js";import{b as T}from"../chunks/Bq1kRtx3.js";var la=C('<p class="err svelte-iv8lg3"> </p>'),ia=C('<span class="loading svelte-iv8lg3"><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span> Entrando…</span>'),ra=C('<div class="page svelte-iv8lg3"><section class="auth svelte-iv8lg3" role="form" aria-labelledby="title-login"><div class="head svelte-iv8lg3"><h1 id="title-login" class="svelte-iv8lg3">Acceso</h1></div> <div class="body svelte-iv8lg3"><p class="subtitle access-instructions svelte-iv8lg3"><strong class="svelte-iv8lg3">¿Primera vez en KitIA?</strong> <br class="svelte-iv8lg3"/> Ingresa tu email y crea una contraseña, luego haz clic en <strong class="svelte-iv8lg3">Crear cuenta</strong>.</p> <p class="subtitle access-instructions svelte-iv8lg3"><strong class="svelte-iv8lg3">¿Ya tienes cuenta?</strong> <br class="svelte-iv8lg3"/> Ingresa tus datos y haz clic en <strong class="svelte-iv8lg3">Entrar</strong>.</p> <div class="inputRow svelte-iv8lg3"><label for="email" class="svelte-iv8lg3">Email</label> <div class="inputWrap svelte-iv8lg3"><input id="email" class="input svelte-iv8lg3" type="email" placeholder="tu@correo.com" autocomplete="email"/></div></div> <div class="inputRow svelte-iv8lg3"><label for="pass" class="svelte-iv8lg3">Contraseña</label> <div class="inputWrap svelte-iv8lg3"><input id="pass" class="input svelte-iv8lg3" placeholder="••••••••" autocomplete="current-password"/> <button type="button" class="toggle svelte-iv8lg3" aria-label="Mostrar u ocultar contraseña"> </button></div></div> <!> <div class="actions svelte-iv8lg3"><button class="btn primary svelte-iv8lg3"><!></button> <button class="btn svelte-iv8lg3" aria-label="Crear cuenta nueva">Crear cuenta</button></div></div> <div class="foot svelte-iv8lg3"><span class="help svelte-iv8lg3">¿Olvidaste tu contraseña? <a class="link svelte-iv8lg3">Recupérala</a></span> <span class="help svelte-iv8lg3">¿Problemas? <a class="link svelte-iv8lg3">Contáctanos</a></span></div></section></div>');function fa(Y,q){aa(q,!1),Z(()=>{const a=()=>{fetch(`${F}/health`).then(()=>{console.log("Conectado al servidor")})};a();const e=setInterval(a,3e5);return()=>clearInterval(e)});let d=c(""),b=c(""),g=c(""),o=c(!1),u=c(!1);async function f(a){r(o,!0),r(g,"");try{const e=await fetch(`${F}/auth/${a}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:l(d),password:l(b)}),credentials:"include",mode:"cors"});if(!e.ok)throw new Error(await e.text()||"Error");const I=await e.json();localStorage.setItem("access_token",I.access_token),localStorage.setItem("email",l(d)),window.location.href=`${T}/app/`}catch(e){r(g,e.message)}finally{r(o,!1)}}const P=a=>{a.key==="Enter"&&(a.preventDefault(),f("login"))};ta();var _=ra(),S=s(_),h=i(s(S),2),y=i(s(h),4),z=i(s(y),2),w=s(z);J(w),t(z),t(y);var k=i(y,2),O=i(s(k),2),v=s(O);J(v);var x=i(v,2),G=s(x,!0);t(x),t(O),t(k);var $=i(k,2);{var H=a=>{var e=la(),I=s(e,!0);t(e),B(()=>W(I,l(g))),m(a,e)};D($,a=>{l(g)&&a(H)})}var K=i($,2),n=s(K),L=s(n);{var Q=a=>{var e=ia();m(a,e)},U=a=>{var e=sa("Entrar");m(a,e)};D(L,a=>{l(o)?a(Q):a(U,!1)})}t(n);var M=i(n,2);t(K),t(h);var R=i(h,2),E=s(R),V=i(s(E));t(E);var j=i(E,2),X=i(s(j));A(X,"href","mailto:kitia.app@gmail.com"),t(j),t(R),t(S),t(_),B(()=>{A(v,"type",l(u)?"text":"password"),W(G,l(u)?"Ocultar":"Mostrar"),n.disabled=l(o),M.disabled=l(o),A(V,"href",`${T}/recuperar`)}),N(w,()=>l(d),a=>r(d,a)),p("keydown",w,P),N(v,()=>l(b),a=>r(b,a)),p("keydown",v,P),p("click",x,()=>r(u,!l(u))),p("click",n,()=>f("login")),p("click",M,()=>f("register")),m(Y,_),ea()}export{fa as component};
