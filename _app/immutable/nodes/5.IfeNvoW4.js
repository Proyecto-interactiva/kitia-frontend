import"../chunks/DsnmJJEf.js";import"../chunks/C3jkjRJ1.js";import{o as Ee,a as Ce}from"../chunks/DsMb63vb.js";import{av as Be,aD as S,aE as Ie,ax as m,a as d,aw as Le,b as e,K as j,s as v,az as s,aA as a,ay as r,aC as k,u as i,c as Pe,f as ie,aF as De}from"../chunks/CdeIWoL4.js";import{s as g,e as W}from"../chunks/CUaUiNLG.js";import{i as B}from"../chunks/B1etJHai.js";import{e as G,i as H}from"../chunks/DbCOwyXC.js";import{A as le,s as Ne,r as Oe,a as Re}from"../chunks/o3SDYzGp.js";import{s as Se}from"../chunks/C6aGtPp3.js";import{s as Te}from"../chunks/CRGCJ-Ux.js";import{i as Ve}from"../chunks/l0-HXMSf.js";import{s as Fe,a as Je}from"../chunks/B-b6UMoa.js";import{p as Ke}from"../chunks/DYhoCqws.js";import{b as Ue}from"../chunks/BCIlTSZI.js";var We=m('<div class="skeletonCard svelte-9jfjg4"><span class="skDot svelte-9jfjg4"></span> <div class="skLines svelte-9jfjg4"><span class="skLine svelte-9jfjg4"></span> <span class="skLine short svelte-9jfjg4"></span></div> <span class="skBadge svelte-9jfjg4"></span></div>'),Ge=m('<section class="loadingWrap svelte-9jfjg4" aria-busy="true" aria-live="polite"><div class="loader svelte-9jfjg4"><div class="pill svelte-9jfjg4"><svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true" class="svelte-9jfjg4"><path d="M20 6L9 17l-5-5" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svelte-9jfjg4"></path></svg> <span class="orbit svelte-9jfjg4"></span></div> <div class="progress svelte-9jfjg4" role="progressbar" aria-valuemin="0" aria-valuemax="100"><div class="bar svelte-9jfjg4"></div></div> <div class="tip svelte-9jfjg4"><strong class="svelte-9jfjg4"> </strong> </div></div> <div class="skeletonList svelte-9jfjg4"></div></section>'),He=m('<p class="error svelte-9jfjg4"> </p>'),Qe=m('<p style="margin:0; color:var(--muted); font-size:14px" class="svelte-9jfjg4"><strong class="svelte-9jfjg4">Etapa:</strong> </p>'),Xe=m('<p style="margin:0 0 6px; color:var(--muted)" class="svelte-9jfjg4"><strong class="svelte-9jfjg4">Descripción:</strong> </p>'),Ye=m('<p class="pilar-desc svelte-9jfjg4"> </p>'),Ze=m('<label><input class="check svelte-9jfjg4" type="checkbox"/> <span class="tick svelte-9jfjg4" aria-hidden="true"><svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" class="svelte-9jfjg4"><path d="M20 6L9 17l-5-5" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svelte-9jfjg4"></path></svg></span> <span class="qtext svelte-9jfjg4"> </span> <span class="meta svelte-9jfjg4"><!> </span></label>'),qe=m('<section class="pilar svelte-9jfjg4"><h2 class="pilar-title svelte-9jfjg4"> </h2> <!> <div class="list svelte-9jfjg4"></div></section>'),ea=m(`<header class="heading svelte-9jfjg4"><h1 class="svelte-9jfjg4"></h1></header> <div class="card svelte-9jfjg4" style="max-width:980px; margin:0 auto 20px; padding:16px;"><h2 style="margin:0 0 6px" class="svelte-9jfjg4"> </h2> <!> <!></div> <hr class="svelte-9jfjg4"/> <h1 style="text-align:center; margin: 20px auto 10px; font-size: clamp(20px,4vw,32px); max-width:980px;" class="svelte-9jfjg4">Autoevaluación de pilares éticos</h1> <p style="text-align:center; margin:0 auto 24px; color:
            var(--muted); font-size: clamp(14px,2vw,18px); max-width:980px;" class="svelte-9jfjg4">Para ayudarte a reflexionar sobre el uso de IA en tu proyecto, te invitamos a revisar los siguientes pilares éticos en una autoevaluación guiada que te permita identificar fortalezas, riesgos y decisiones a considerar.</p> <p class="hint svelte-9jfjg4" style="margin-top:8px; background: #fffbf0; padding:8px 12px; border-radius:8px; border:1px solid #f3e6bf;"><b class="svelte-9jfjg4">Marca las preguntas que consideres cumplidas en tu proyecto actual. Al finalizar, podrás revisar un resumen de tu evaluación.</b> <br class="svelte-9jfjg4"/><br class="svelte-9jfjg4"/> Este proceso no evalúa tu desempeño académico ni reemplaza decisiones docentes. Es una herramienta que entrega un espacio de apoyo para la reflexión y autoevaluación ética.</p> <!> <div class="summary svelte-9jfjg4"> </div> <nav class="actions svelte-9jfjg4"><button class="back svelte-9jfjg4" type="button" aria-label="Volver"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="svelte-9jfjg4"><path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="svelte-9jfjg4"></path></svg></button> <button class="cta svelte-9jfjg4" type="button">Continuar</button></nav>`,1),aa=m('<section class="screen svelte-9jfjg4"><!></section>');function ja(ne,ce){Be(ce,!1);const Q=()=>Je(Ke,"$page",ve),[ve,pe]=Fe(),N=j();let p=j({nombre:"",descripcion:"",pilares:[]}),y=j([]),M=j(!0),T=j(""),I=j({comp:0,total:0}),X=j(0);Ee(async()=>{try{const t=await fetch(`${le}/evaluaciones/${e(N)}/checklist`);if(!t.ok)throw new Error(await t.text());v(p,await t.json()),v(y,e(p).pilares??[])}catch(t){v(T,t.message)}finally{v(M,!1)}});const Y=["Verificando fuentes…","Midiendo impacto y riesgos…","Buscando sesgos…","Revisando transparencia y trazabilidad…","Organizando preguntas del pilar actual…"];let b=j(0),A=j(0),h=j(null);Ce(()=>{e(h)&&clearInterval(e(h))});function de(t,l,f){const _=e(y).find(n=>n.id===t);if(!_)return;const w=_.preguntas.find(n=>n.id===l);w&&(w.completada=f,fetch(`${le}/evaluaciones/${e(N)}/preguntas/${l}`,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({completada:f,notas:w.notas??""})}).then(n=>{if(n.ok)v(y,[...e(y)]);else throw new Error("Error actualizando pregunta")}).catch(()=>{}))}function fe(){history.back()}function ge(){window.location.href=`${Ue}/evaluaciones/${e(N)}/resultados`}S(()=>Q(),()=>{v(N,Q().params.id)}),S(()=>e(y),()=>{const t=e(y).flatMap(l=>l.preguntas);v(I,{comp:t.filter(l=>l.completada).length,total:t.length}),v(X,t.reduce((l,f)=>l+(f.completada?f.puntos:0),0))}),S(()=>(e(M),e(h),e(b),e(A)),()=>{e(M)&&!e(h)&&(v(b,0),v(A,0),v(h,setInterval(()=>{v(b,Math.min(95,e(b)+Math.ceil(Math.random()*7))),v(A,(e(A)+1)%Y.length)},600)))}),S(()=>(e(M),e(h)),()=>{!e(M)&&e(h)&&(clearInterval(e(h)),v(h,null),v(b,100))}),Ie(),Ve();var V=aa(),ue=s(V);{var je=t=>{var l=Ge(),f=s(l),_=r(s(f),2),w=s(_);a(_);var n=r(_,2),u=s(n),$=s(u);a(u);var F=r(u);a(n),a(f);var E=r(f,2);G(E,4,()=>Array(3),H,(L,Z)=>{var O=We();d(L,O)}),a(E),a(l),k(()=>{Ne(_,"aria-valuenow",e(b)),Te(w,`width:${e(b)}%`),g($,`${e(b)??""}%`),g(F,` · ${e(A),i(()=>Y[e(A)])??""}`)}),d(t,l)},me=t=>{var l=Pe(),f=ie(l);{var _=n=>{var u=He(),$=s(u,!0);a(u),k(()=>g($,e(T))),d(n,u)},w=n=>{var u=ea(),$=ie(u),F=s($);F.textContent="Evaluación ética inicial",a($);var E=r($,2),L=s(E),Z=s(L);a(L);var O=r(L,2);{var he=x=>{var o=Qe(),z=r(s(o));a(o),k(()=>g(z,` ${e(p),i(()=>e(p).etapa)??""}`)),d(x,o)};B(O,x=>{e(p),i(()=>e(p).etapa)&&x(he)})}var _e=r(O,2);{var xe=x=>{var o=Xe(),z=r(s(o));a(o),k(()=>g(z,` ${e(p),i(()=>e(p).descripcion)??""}`)),d(x,o)};B(_e,x=>{e(p),i(()=>e(p).descripcion)&&x(xe)})}a(E);var q=r(E,10);G(q,1,()=>e(y),H,(x,o)=>{var z=qe(),K=s(z),ye=s(K,!0);a(K);var se=r(K,2);{var we=P=>{var c=Ye(),C=s(c,!0);a(c),k(()=>g(C,(e(o),i(()=>e(o).descripcion)))),d(P,c)};B(se,P=>{e(o),i(()=>e(o).descripcion)&&P(we)})}var te=r(se,2);G(te,5,()=>(e(o),i(()=>e(o).preguntas)),H,(P,c)=>{var C=Ze(),R=s(C);Oe(R);var U=r(R,4),$e=s(U,!0);a(U);var re=r(U,2),oe=s(re);{var ze=D=>{var Ae=De("Aspecto sensible ·");d(D,Ae)};B(oe,D=>{e(c),i(()=>e(c).critica)&&D(ze)})}var Me=r(oe);a(re),a(C),k(()=>{Se(C,1,`q ${e(c),i(()=>e(c).completada?"done":"")??""}`,"svelte-9jfjg4"),Re(R,(e(c),i(()=>e(c).completada))),g($e,(e(c),i(()=>e(c).texto))),g(Me,`${e(c),i(()=>e(c).puntos)??""}p`)}),W("change",R,D=>de(e(o).id,e(c).id,D.currentTarget.checked)),d(P,C)}),a(te),a(z),k(()=>g(ye,(e(o),i(()=>e(o).nombre)))),d(x,z)});var J=r(q,2),be=s(J);a(J);var ee=r(J,2),ae=s(ee),ke=r(ae,2);a(ee),k(()=>{g(Z,`Nombre: ${e(p),i(()=>e(p).nombre)??""}`),g(be,`Progreso: ${e(I),i(()=>e(I).comp)??""}/${e(I),i(()=>e(I).total)??""} · Puntos: ${e(X)??""}`)}),W("click",ae,fe),W("click",ke,ge),d(n,u)};B(f,n=>{e(T)?n(_):n(w,!1)},!0)}d(t,l)};B(ue,t=>{e(M)?t(je):t(me,!1)})}a(V),d(ne,V),Le(),pe()}export{ja as component};
