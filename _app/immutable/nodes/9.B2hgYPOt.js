import"../chunks/DsnmJJEf.js";import"../chunks/nVMnYrZ1.js";import{av as X,aw as C,ax as M,b as l,a as m,ay as Z,az as s,aA as i,s as r,K as c,aB as e,aF as aa}from"../chunks/qD57vNRg.js";import{e as p,s as W}from"../chunks/DJhX7ZAe.js";import{i as D}from"../chunks/DYzAGI7O.js";import{s as I,r as F,A as sa}from"../chunks/BOyBn3DS.js";import{b as J}from"../chunks/BLNXZVOq.js";import{i as ea}from"../chunks/XiKBQBBS.js";import{b as N}from"../chunks/WLyTCt2w.js";var ta=C('<p class="err svelte-iv8lg3"> </p>'),la=C('<span class="loading svelte-iv8lg3"><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span> Entrando…</span>'),ia=C('<div class="page svelte-iv8lg3"><section class="auth svelte-iv8lg3" role="form" aria-labelledby="title-login"><div class="head svelte-iv8lg3"><h1 id="title-login" class="svelte-iv8lg3">Acceso</h1></div> <div class="body svelte-iv8lg3"><p class="subtitle access-instructions svelte-iv8lg3"><strong class="svelte-iv8lg3">¿Primera vez en KitIA?</strong> <br class="svelte-iv8lg3"/> Ingresa tu email y crea una contraseña, luego haz clic en <strong class="svelte-iv8lg3">Crear cuenta</strong>.</p> <p class="subtitle access-instructions svelte-iv8lg3"><strong class="svelte-iv8lg3">¿Ya tienes cuenta?</strong> <br class="svelte-iv8lg3"/> Ingresa tus datos y haz clic en <strong class="svelte-iv8lg3">Entrar</strong>.</p> <div class="inputRow svelte-iv8lg3"><label for="email" class="svelte-iv8lg3">Email</label> <div class="inputWrap svelte-iv8lg3"><input id="email" class="input svelte-iv8lg3" type="email" placeholder="tu@correo.com" autocomplete="email"/></div></div> <div class="inputRow svelte-iv8lg3"><label for="pass" class="svelte-iv8lg3">Contraseña</label> <div class="inputWrap svelte-iv8lg3"><input id="pass" class="input svelte-iv8lg3" placeholder="••••••••" autocomplete="current-password"/> <button type="button" class="toggle svelte-iv8lg3" aria-label="Mostrar u ocultar contraseña"> </button></div></div> <!> <div class="actions svelte-iv8lg3"><button class="btn primary svelte-iv8lg3"><!></button> <button class="btn svelte-iv8lg3" aria-label="Crear cuenta nueva">Crear cuenta</button></div></div> <div class="foot svelte-iv8lg3"><span class="help svelte-iv8lg3">¿Olvidaste tu contraseña? <a class="link svelte-iv8lg3">Recupérala</a></span> <span class="help svelte-iv8lg3">¿Problemas? <a class="link svelte-iv8lg3">Contáctanos</a></span></div></section></div>');function ma(T,Y){X(Y,!1);let d=c(""),b=c(""),g=c(""),v=c(!1),u=c(!1);async function f(a){r(v,!0),r(g,"");try{const t=await fetch(`${sa}/auth/${a}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:l(d),password:l(b)}),credentials:"include",mode:"cors"});if(!t.ok)throw new Error(await t.text()||"Error");const A=await t.json();localStorage.setItem("access_token",A.access_token),localStorage.setItem("email",l(d)),window.location.href=`${N}/app/`}catch(t){r(g,t.message)}finally{r(v,!1)}}const P=a=>{a.key==="Enter"&&(a.preventDefault(),f("login"))};ea();var _=ia(),S=s(_),h=i(s(S),2),y=i(s(h),4),z=i(s(y),2),w=s(z);F(w),e(z),e(y);var k=i(y,2),O=i(s(k),2),o=s(O);F(o);var x=i(o,2),q=s(x,!0);e(x),e(O),e(k);var K=i(k,2);{var G=a=>{var t=ta(),A=s(t,!0);e(t),M(()=>W(A,l(g))),m(a,t)};D(K,a=>{l(g)&&a(G)})}var R=i(K,2),n=s(R),H=s(n);{var L=a=>{var t=la();m(a,t)},Q=a=>{var t=aa("Entrar");m(a,t)};D(H,a=>{l(v)?a(L):a(Q,!1)})}e(n);var $=i(n,2);e(R),e(h);var j=i(h,2),E=s(j),U=i(s(E));e(E);var B=i(E,2),V=i(s(B));I(V,"href","mailto:kitia.app@gmail.com"),e(B),e(j),e(S),e(_),M(()=>{I(o,"type",l(u)?"text":"password"),W(q,l(u)?"Ocultar":"Mostrar"),n.disabled=l(v),$.disabled=l(v),I(U,"href",`${N}/recuperar`)}),J(w,()=>l(d),a=>r(d,a)),p("keydown",w,P),J(o,()=>l(b),a=>r(b,a)),p("keydown",o,P),p("click",x,()=>r(u,!l(u))),p("click",n,()=>f("login")),p("click",$,()=>f("register")),m(T,_),Z()}export{ma as component};
