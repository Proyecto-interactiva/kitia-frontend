import"../chunks/DsnmJJEf.js";import"../chunks/DPrBCdru.js";import{aE as Y,aH as P,aM as B,b as l,a as g,aI as Z,aK as e,s as r,r as c,aJ as i,aL as s,aO as aa}from"../chunks/neBeJoSk.js";import{s as D}from"../chunks/eGiiCsl1.js";import{i as H}from"../chunks/D063bcsz.js";import{r as L,s as A}from"../chunks/DcqV7Q3_.js";import{e as p}from"../chunks/C0dDduxs.js";import{b as N}from"../chunks/CbHFr3o3.js";import{i as ea}from"../chunks/CapF0iNR.js";import{A as sa}from"../chunks/gz7YWXWY.js";import{b as C}from"../chunks/aGreL2Kf.js";var ta=P('<p class="err svelte-iv8lg3"> </p>'),la=P('<span class="loading svelte-iv8lg3"><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span> Entrando…</span>'),ia=P('<div class="page svelte-iv8lg3"><section class="auth svelte-iv8lg3" role="form" aria-labelledby="title-login"><div class="head svelte-iv8lg3"><h1 id="title-login" class="svelte-iv8lg3">Acceso</h1> <span class="pill svelte-iv8lg3">Área pública</span></div> <div class="body svelte-iv8lg3"><div class="inputRow svelte-iv8lg3"><label for="email" class="svelte-iv8lg3">Email</label> <div class="inputWrap svelte-iv8lg3"><input id="email" class="input svelte-iv8lg3" type="email" placeholder="tu@correo.com" autocomplete="email"/></div></div> <div class="inputRow svelte-iv8lg3"><label for="pass" class="svelte-iv8lg3">Contraseña</label> <div class="inputWrap svelte-iv8lg3"><input id="pass" class="input svelte-iv8lg3" placeholder="••••••••" autocomplete="current-password"/> <button type="button" class="toggle svelte-iv8lg3" aria-label="Mostrar u ocultar contraseña"> </button></div></div> <!> <div class="actions svelte-iv8lg3"><button class="btn primary svelte-iv8lg3"><!></button> <button class="btn svelte-iv8lg3" aria-label="Crear cuenta nueva">Crear cuenta</button></div></div> <div class="foot svelte-iv8lg3"><span class="help svelte-iv8lg3">¿Olvidaste tu contraseña? <a class="link svelte-iv8lg3">Recupérala</a></span> <span class="help svelte-iv8lg3">¿Problemas? <a class="link svelte-iv8lg3">Contáctanos</a></span></div></section></div>');function fa(T,q){Y(q,!1);let m=c(""),b=c(""),d=c(""),o=c(!1),u=c(!1);async function f(a){r(o,!0),r(d,"");try{const t=await fetch(`${sa}/auth/${a}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:l(m),password:l(b)}),credentials:"include",mode:"cors"});if(!t.ok)throw new Error(await t.text()||"Error");const O=await t.json();localStorage.setItem("access_token",O.access_token),window.location.href=`${C}/tutor/`}catch(t){r(d,t.message)}finally{r(o,!1)}}const S=a=>{a.key==="Enter"&&(a.preventDefault(),f("login"))};ea();var _=ia(),$=e(_),h=i(e($),2),w=e(h),I=i(e(w),2),y=e(I);L(y),s(I),s(w);var k=i(w,2),M=i(e(k),2),v=e(M);L(v);var x=i(v,2),z=e(x,!0);s(x),s(M),s(k);var R=i(k,2);{var F=a=>{var t=ta(),O=e(t,!0);s(t),B(()=>D(O,l(d))),g(a,t)};H(R,a=>{l(d)&&a(F)})}var j=i(R,2),n=e(j),G=e(n);{var Q=a=>{var t=la();g(a,t)},U=a=>{var t=aa("Entrar");g(a,t)};H(G,a=>{l(o)?a(Q):a(U,!1)})}s(n);var J=i(n,2);s(j),s(h);var K=i(h,2),E=e(K),V=i(e(E));s(E);var W=i(E,2),X=i(e(W));s(W),s(K),s($),s(_),B(()=>{A(v,"type",l(u)?"text":"password"),D(z,l(u)?"Ocultar":"Mostrar"),n.disabled=l(o),J.disabled=l(o),A(V,"href",`${C}/recuperar`),A(X,"href",`${C}/contacto`)}),N(y,()=>l(m),a=>r(m,a)),p("keydown",y,S),N(v,()=>l(b),a=>r(b,a)),p("keydown",v,S),p("click",x,()=>r(u,!l(u))),p("click",n,()=>f("login")),p("click",J,()=>f("register")),g(T,_),Z()}export{fa as component};
