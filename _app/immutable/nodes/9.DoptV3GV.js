import"../chunks/DsnmJJEf.js";import"../chunks/BArfBHBa.js";import{av as Y,ay as S,aD as M,b as l,a as m,az as Z,aB as e,aA as i,s as r,K as c,aC as s,aF as aa}from"../chunks/JwfWP7l2.js";import{e as p,s as W}from"../chunks/D73Aelo1.js";import{i as z}from"../chunks/VnCXLVbX.js";import{s as C,r as F,A as ea}from"../chunks/Ce2Y3TL0.js";import{b as J}from"../chunks/BswAZx1J.js";import{i as sa}from"../chunks/V6Rb_VSp.js";import{b as N}from"../chunks/B2bF6wAC.js";var ta=S('<p class="err svelte-iv8lg3"> </p>'),la=S('<span class="loading svelte-iv8lg3"><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span> Entrando…</span>'),ia=S('<div class="page svelte-iv8lg3"><section class="auth svelte-iv8lg3" role="form" aria-labelledby="title-login"><div class="head svelte-iv8lg3"><h1 id="title-login" class="svelte-iv8lg3">Acceso</h1> <span class="pill svelte-iv8lg3">Área pública</span></div> <div class="body svelte-iv8lg3"><div class="inputRow svelte-iv8lg3"><label for="email" class="svelte-iv8lg3">Email</label> <div class="inputWrap svelte-iv8lg3"><input id="email" class="input svelte-iv8lg3" type="email" placeholder="tu@correo.com" autocomplete="email"/></div></div> <div class="inputRow svelte-iv8lg3"><label for="pass" class="svelte-iv8lg3">Contraseña</label> <div class="inputWrap svelte-iv8lg3"><input id="pass" class="input svelte-iv8lg3" placeholder="••••••••" autocomplete="current-password"/> <button type="button" class="toggle svelte-iv8lg3" aria-label="Mostrar u ocultar contraseña"> </button></div></div> <!> <div class="actions svelte-iv8lg3"><button class="btn primary svelte-iv8lg3"><!></button> <button class="btn svelte-iv8lg3" aria-label="Crear cuenta nueva">Crear cuenta</button></div></div> <div class="foot svelte-iv8lg3"><span class="help svelte-iv8lg3">¿Olvidaste tu contraseña? <a class="link svelte-iv8lg3">Recupérala</a></span> <span class="help svelte-iv8lg3">¿Problemas? <a class="link svelte-iv8lg3">Contáctanos</a></span></div></section></div>');function ma(T,q){Y(q,!1);let d=c(""),b=c(""),u=c(""),o=c(!1),g=c(!1);async function f(a){r(o,!0),r(u,"");try{const t=await fetch(`${ea}/auth/${a}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:l(d),password:l(b)}),credentials:"include",mode:"cors"});if(!t.ok)throw new Error(await t.text()||"Error");const A=await t.json();localStorage.setItem("access_token",A.access_token),localStorage.setItem("email",l(d)),window.location.href=`${N}/tutor/`}catch(t){r(u,t.message)}finally{r(o,!1)}}const O=a=>{a.key==="Enter"&&(a.preventDefault(),f("login"))};sa();var _=ia(),P=e(_),h=i(e(P),2),y=e(h),I=i(e(y),2),w=e(I);F(w),s(I),s(y);var k=i(y,2),R=i(e(k),2),v=e(R);F(v);var x=i(v,2),G=e(x,!0);s(x),s(R),s(k);var $=i(k,2);{var H=a=>{var t=ta(),A=e(t,!0);s(t),M(()=>W(A,l(u))),m(a,t)};z($,a=>{l(u)&&a(H)})}var j=i($,2),n=e(j),L=e(n);{var Q=a=>{var t=la();m(a,t)},U=a=>{var t=aa("Entrar");m(a,t)};z(L,a=>{l(o)?a(Q):a(U,!1)})}s(n);var B=i(n,2);s(j),s(h);var D=i(h,2),E=e(D),V=i(e(E));s(E);var K=i(E,2),X=i(e(K));C(X,"href","mailto:kitia.app@gmail.com"),s(K),s(D),s(P),s(_),M(()=>{C(v,"type",l(g)?"text":"password"),W(G,l(g)?"Ocultar":"Mostrar"),n.disabled=l(o),B.disabled=l(o),C(V,"href",`${N}/recuperar`)}),J(w,()=>l(d),a=>r(d,a)),p("keydown",w,O),J(v,()=>l(b),a=>r(b,a)),p("keydown",v,O),p("click",x,()=>r(g,!l(g))),p("click",n,()=>f("login")),p("click",B,()=>f("register")),m(T,_),Z()}export{ma as component};
