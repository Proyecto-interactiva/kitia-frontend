import"../chunks/DsnmJJEf.js";import"../chunks/D_JxtCvG.js";import{aH as f,a as p,aK as s,aJ as c,b as e,O as u,aL as l,f as S,aN as H,aM as g,s as i}from"../chunks/H9qgBCyD.js";import{s as A}from"../chunks/DflrDu60.js";import{i as O}from"../chunks/CoHz1Npk.js";import{r as I,s as L}from"../chunks/CsChzsNn.js";import{e as P}from"../chunks/CV5asq_h.js";import{b as M}from"../chunks/DicIaQeK.js";import{A as V}from"../chunks/gz7YWXWY.js";import{b as q}from"../chunks/D73iepPs.js";var z=f('<div style="color:#b91c1c;font-weight:700"> </div>'),C=f('<div><label for="email" class="svelte-lu9a8t">Email</label> <input id="email" class="input svelte-lu9a8t" type="email" placeholder="tu@correo.com" autocomplete="email"/> <p class="hint svelte-lu9a8t">Te enviaremos un enlace temporal para restablecer tu clave.</p></div> <!> <button class="btn svelte-lu9a8t"> </button>',1),F=f('<div class="ok svelte-lu9a8t">Si el correo está registrado, te enviamos un enlace para cambiar tu contraseña. Revisa tu bandeja y spam.</div> <div style="display:flex; gap:8px; margin-top:10px;"><a class="pill svelte-lu9a8t">Volver al acceso</a></div>',1),G=f('<div class="page svelte-lu9a8t"><section class="card svelte-lu9a8t" role="form" aria-labelledby="rec-title"><div class="head svelte-lu9a8t"><h1 id="rec-title" class="svelte-lu9a8t">Recuperar contraseña</h1> <span class="pill svelte-lu9a8t">Paso 1 de 2</span></div> <div class="body svelte-lu9a8t"><!></div></section></div>');function sa(j){let o=u(""),d=u(!1),b=u(!1),_=u("");async function x(){if(e(o).trim()){i(d,!0),i(_,"");try{await fetch(`${V}/auth/password/forgot`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:e(o)}),credentials:"include",mode:"cors"}),i(b,!0)}catch{i(b,!0)}finally{i(d,!1)}}}const J=a=>{a.key==="Enter"&&(a.preventDefault(),x())};var y=G(),k=s(y),E=c(s(k),2),K=s(E);{var N=a=>{var v=C(),r=S(v),n=c(s(r),2);I(n),H(2),l(r);var w=c(r,2);{var T=t=>{var h=z(),D=s(h,!0);l(h),g(()=>A(D,e(_))),p(t,h)};O(w,t=>{e(_)&&t(T)})}var m=c(w,2),B=s(m,!0);l(m),g(t=>{m.disabled=t,A(B,e(d)?"Enviando…":"Enviar enlace")},[()=>e(d)||!e(o).trim()]),M(n,()=>e(o),t=>i(o,t)),P("keydown",n,J),P("click",m,x),p(a,v)},R=a=>{var v=F(),r=c(S(v),2),n=s(r);l(r),g(()=>L(n,"href",`${q}/login`)),p(a,v)};O(K,a=>{e(b)?a(R,!1):a(N)})}l(E),l(k),l(y),p(j,y)}export{sa as component};
