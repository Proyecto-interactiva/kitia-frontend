import"../chunks/DsnmJJEf.js";import"../chunks/BArfBHBa.js";import{o as na}from"../chunks/D6F5klbK.js";import{av as va,aw as da,ax as ba,ay as b,b as a,a as n,az as ua,aA as c,aB as o,s as A,K as L,aC as s,c as pa,f as O,u as d,aD as w,aE as _a,aF as ma}from"../chunks/JwfWP7l2.js";import{e as z,s as x}from"../chunks/D73Aelo1.js";import{i as f}from"../chunks/VnCXLVbX.js";import{e as ya,i as ha}from"../chunks/CDfcZW8-.js";import{A as fa,r as ja}from"../chunks/Ce2Y3TL0.js";import{s as ga}from"../chunks/C9Y4emZh.js";import{b as wa}from"../chunks/BswAZx1J.js";import{i as xa}from"../chunks/V6Rb_VSp.js";import{b as E}from"../chunks/D2YwoYh4.js";var ka=b('<div class="grid svelte-cbyojb" aria-busy="true" aria-live="polite"><div class="skeleton svelte-cbyojb"></div> <div class="skeleton svelte-cbyojb"></div></div>'),Ca=b('No encontramos evaluaciones que coincidan con ‚Äú<strong class="svelte-cbyojb"> </strong>‚Äù.',1),Ma=b('<div class="empty svelte-cbyojb"><!> <div style="margin-top:10px;" class="svelte-cbyojb"><button class="btn primary svelte-cbyojb">Crear una nueva</button></div></div>'),Aa=b('<p class="meta svelte-cbyojb"> </p>'),La=b('<p class="desc svelte-cbyojb"> </p>'),za=b('<div class="progress svelte-cbyojb" aria-label="Progreso"><div class="bar svelte-cbyojb"></div></div>'),Ea=b('<article class="card svelte-cbyojb"><div class="head svelte-cbyojb"><div class="svelte-cbyojb"><h3 class="title svelte-cbyojb"> </h3> <p class="meta svelte-cbyojb"> </p> <!></div></div> <!> <!> <div class="foot svelte-cbyojb"><div class="actions svelte-cbyojb"><button class="btn secondary svelte-cbyojb"><svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" style="vertical-align:middle;" class="svelte-cbyojb"><path d="M3 17.25V21h3.75l11.06-11.06a1 1 0 0 0 0-1.41l-2.34-2.34a1 1 0 0 0-1.41 0L3 17.25zM20.71 7.04a1 1 0 0 0 0-1.41l-2.34-2.34a1 1 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" fill="currentColor" class="svelte-cbyojb"></path></svg> Editar</button> <button class="btn svelte-cbyojb"><svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" style="vertical-align:middle;" class="svelte-cbyojb"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6zm7 1.5V8h5.5L13 3.5zM6 4h6v5a1 1 0 0 0 1 1h5v10a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4z" fill="currentColor" class="svelte-cbyojb"></path></svg> Ver resultados</button></div></div></article>'),Ba=b('<div class="grid svelte-cbyojb"></div>'),Da=b('<div class="page svelte-cbyojb"><div class="container svelte-cbyojb"><section class="hero svelte-cbyojb"><div class="svelte-cbyojb"><h2 class="svelte-cbyojb">¬°Hola!</h2> <p class="svelte-cbyojb">Revisa y contin√∫a con tus evaluaciones √©ticas anteriores.</p></div> <button class="btn primary svelte-cbyojb">+ Nueva evaluaci√≥n √©tica</button></section>  <div class="toolbar svelte-cbyojb"><div class="search svelte-cbyojb"><span aria-hidden="true" class="svelte-cbyojb">üîé</span> <input placeholder="Buscar por nombre, descripci√≥n, etapa o fecha‚Ä¶" class="svelte-cbyojb"/></div></div> <!></div></div>');function Ra(Q,U){va(U,!1);const k=L();let B=L([]),H=L(!0),u=L("");na(async()=>{try{const e=localStorage.getItem("access_token")||"",i=await fetch(`${fa}/evaluaciones/list`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},credentials:"include",mode:"cors"});if(!i.ok)throw new Error(await i.text());A(B,await i.json())}catch(e){console.error("Error cargando evaluaciones:",e)}finally{A(H,!1)}});const W=e=>new Date(e).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),P=e=>e.puntos!==void 0&&e.puntos_max?Math.round(e.puntos/e.puntos_max*100):e.puntuacion!==void 0?Math.max(0,Math.min(100,Math.round(e.puntuacion))):null;da(()=>(a(B),a(u)),()=>{A(k,a(B).filter(e=>{const i=S=>(S||"").toLowerCase().includes(a(u).toLowerCase());return i(e.nombre)||i(e.descripcion)||i(e.etapa)||new Date(e.createdAt).toLocaleDateString("es-CL").includes(a(u))}))}),ba(),xa();var D=Da(),q=o(D),V=o(q),X=c(o(V),2);s(V);var $=c(V,2),I=o($),N=c(o(I),2);ja(N),s(I),s($);var Y=c($,2);{var Z=e=>{var i=ka();n(e,i)},aa=e=>{var i=pa(),S=O(i);{var ea=_=>{var p=Ma(),C=o(p);{var t=v=>{var y=Ca(),h=c(O(y)),F=o(h,!0);s(h),_a(),w(()=>x(F,a(u))),n(v,y)},j=v=>{var y=ma("A√∫n no tienes evaluaciones.");n(v,y)};f(C,v=>{a(u)?v(t):v(j,!1)})}var m=c(C,2),M=o(m);s(m),s(p),z("click",M,()=>window.location.href=`${E}/tutor`),n(_,p)},ta=_=>{var p=Ba();ya(p,5,()=>a(k),ha,(C,t)=>{var j=Ea(),m=o(j),M=o(m),v=o(M),y=o(v,!0);s(v);var h=c(v,2),F=o(h);s(h);var sa=c(h,2);{var oa=r=>{var l=Aa(),g=o(l);s(l),w(()=>x(g,`Etapa: ${a(t),d(()=>a(t).etapa)??""}`)),n(r,l)};f(sa,r=>{a(t),d(()=>a(t).etapa)&&r(oa)})}s(M),s(m);var T=c(m,2);{var ra=r=>{var l=La(),g=o(l,!0);s(l),w(()=>x(g,(a(t),d(()=>a(t).descripcion)))),n(r,l)};f(T,r=>{a(t),d(()=>a(t).descripcion)&&r(ra)})}var G=c(T,2);{var ia=r=>{var l=za(),g=o(l);s(l),w(la=>ga(g,la),[()=>(a(t),d(()=>`width:${P(a(t))}%`))]),n(r,l)};f(G,r=>{a(t),d(()=>P(a(t))!==null)&&r(ia)})}var K=c(G,2),R=o(K),J=o(R),ca=c(J,2);s(R),s(K),s(j),w(r=>{x(y,(a(t),d(()=>a(t).nombre))),x(F,`Fecha: ${r??""}`)},[()=>(a(t),d(()=>W(a(t).createdAt)))]),z("click",J,()=>window.location.href=`${E}/evaluaciones/${a(t)._id}/checklist`),z("click",ca,()=>window.location.href=`${E}/evaluaciones/${a(t)._id}/resultados`),n(C,j)}),s(p),n(_,p)};f(S,_=>{a(k),d(()=>a(k).length===0)?_(ea):_(ta,!1)},!0)}n(e,i)};f(Y,e=>{a(H)?e(Z):e(aa,!1)})}s(q),s(D),z("click",X,()=>window.location.href=`${E}/evaluaciones/nueva`),wa(N,()=>a(u),e=>A(u,e)),n(Q,D),ua()}export{Ra as component};
