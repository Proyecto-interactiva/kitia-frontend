import"../chunks/DsnmJJEf.js";import"../chunks/uehYZzkF.js";import{ay as f,a as m,aB as s,aA as c,b as e,O as p,aC as l,f as A,aE as K,aD as g,s as i}from"../chunks/oOC6CyD3.js";import{s as S,e as O}from"../chunks/Bj18uxIO.js";import{i as P}from"../chunks/C2ciDzbX.js";import{r as N,s as V,A as q}from"../chunks/CdqO7dcH.js";import{b as z}from"../chunks/BqAu88Dq.js";import{b as F}from"../chunks/DeN2zgxv.js";var G=f('<div style="color:#b91c1c;font-weight:700"> </div>'),H=f('<div><label for="email" class="svelte-lu9a8t">Email</label> <input id="email" class="input svelte-lu9a8t" type="email" placeholder="tu@correo.com" autocomplete="email"/> <p class="hint svelte-lu9a8t">Te enviaremos un enlace temporal para restablecer tu clave.</p></div> <!> <button class="btn svelte-lu9a8t"> </button>',1),L=f('<div class="ok svelte-lu9a8t">Si el correo está registrado, te enviamos un enlace para cambiar tu contraseña. Revisa tu bandeja y spam.</div> <div style="display:flex; gap:8px; margin-top:10px;"><a class="pill svelte-lu9a8t">Volver al acceso</a></div>',1),M=f('<div class="page svelte-lu9a8t"><section class="card svelte-lu9a8t" role="form" aria-labelledby="rec-title"><div class="head svelte-lu9a8t"><h1 id="rec-title" class="svelte-lu9a8t">Recuperar contraseña</h1> <span class="pill svelte-lu9a8t">Paso 1 de 2</span></div> <div class="body svelte-lu9a8t"><!></div></section></div>');function ea(j){let o=p(""),d=p(!1),b=p(!1),_=p("");async function x(){if(e(o).trim()){i(d,!0),i(_,"");try{await fetch(`${q}/auth/password/forgot`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:e(o)}),credentials:"include",mode:"cors"}),i(b,!0)}catch{i(b,!0)}finally{i(d,!1)}}}const B=a=>{a.key==="Enter"&&(a.preventDefault(),x())};var y=M(),E=s(y),k=c(s(E),2),D=s(k);{var R=a=>{var v=H(),r=A(v),n=c(s(r),2);N(n),K(2),l(r);var w=c(r,2);{var C=t=>{var h=G(),J=s(h,!0);l(h),g(()=>S(J,e(_))),m(t,h)};P(w,t=>{e(_)&&t(C)})}var u=c(w,2),I=s(u,!0);l(u),g(t=>{u.disabled=t,S(I,e(d)?"Enviando…":"Enviar enlace")},[()=>e(d)||!e(o).trim()]),z(n,()=>e(o),t=>i(o,t)),O("keydown",n,B),O("click",u,x),m(a,v)},T=a=>{var v=L(),r=c(A(v),2),n=s(r);l(r),g(()=>V(n,"href",`${F}/login`)),m(a,v)};P(D,a=>{e(b)?a(T,!1):a(R)})}l(k),l(E),l(y),m(j,y)}export{ea as component};
