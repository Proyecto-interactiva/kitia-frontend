import"../chunks/DsnmJJEf.js";import"../chunks/C3jkjRJ1.js";import{ax as f,a as m,az as s,ay as c,b as e,K as p,aA as l,f as A,aB as I,aC as g,s as i}from"../chunks/CdeIWoL4.js";import{s as S,e as P}from"../chunks/CUaUiNLG.js";import{i as j}from"../chunks/B1etJHai.js";import{r as J,s as N,A as V}from"../chunks/o3SDYzGp.js";import{b as q}from"../chunks/9QlUfJ6K.js";import{b as F}from"../chunks/EguUsKtu.js";var G=f('<div style="color:#b91c1c;font-weight:700"> </div>'),H=f('<div><label for="email" class="svelte-lu9a8t">Email</label> <input id="email" class="input svelte-lu9a8t" type="email" placeholder="tu@correo.com" autocomplete="email"/> <p class="hint svelte-lu9a8t">Te enviaremos un enlace temporal para restablecer tu clave.</p></div> <!> <button class="btn svelte-lu9a8t"> </button>',1),L=f('<div class="ok svelte-lu9a8t">Si el correo está registrado, te enviamos un enlace para cambiar tu contraseña. Revisa tu bandeja y spam.</div> <div style="display:flex; gap:8px; margin-top:10px;"><a class="pill svelte-lu9a8t">Volver al acceso</a></div>',1),M=f('<div class="page svelte-lu9a8t"><section class="card svelte-lu9a8t" role="form" aria-labelledby="rec-title"><div class="head svelte-lu9a8t"><h1 id="rec-title" class="svelte-lu9a8t">Recuperar contraseña</h1> <span class="pill svelte-lu9a8t">Paso 1 de 2</span></div> <div class="body svelte-lu9a8t"><!></div></section></div>');function ea(B){let o=p(""),d=p(!1),b=p(!1),_=p("");async function x(){if(e(o).trim()){i(d,!0),i(_,"");try{await fetch(`${V}/auth/password/forgot`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:e(o)}),credentials:"include",mode:"cors"}),i(b,!0)}catch{i(b,!0)}finally{i(d,!1)}}}const K=a=>{a.key==="Enter"&&(a.preventDefault(),x())};var y=M(),k=s(y),E=c(s(k),2),O=s(E);{var R=a=>{var v=H(),r=A(v),n=c(s(r),2);J(n),I(2),l(r);var w=c(r,2);{var z=t=>{var h=G(),D=s(h,!0);l(h),g(()=>S(D,e(_))),m(t,h)};j(w,t=>{e(_)&&t(z)})}var u=c(w,2),C=s(u,!0);l(u),g(t=>{u.disabled=t,S(C,e(d)?"Enviando…":"Enviar enlace")},[()=>e(d)||!e(o).trim()]),q(n,()=>e(o),t=>i(o,t)),P("keydown",n,K),P("click",u,x),m(a,v)},T=a=>{var v=L(),r=c(A(v),2),n=s(r);l(r),g(()=>N(n,"href",`${F}/login`)),m(a,v)};j(O,a=>{e(b)?a(T,!1):a(R)})}l(E),l(k),l(y),m(B,y)}export{ea as component};
