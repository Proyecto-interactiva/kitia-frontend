import"../chunks/DsnmJJEf.js";import"../chunks/D_JxtCvG.js";import{aE as Y,aH as C,aM as W,b as l,a as m,aI as Z,aK as e,s as r,O as c,aJ as i,aL as s,aO as aa}from"../chunks/H9qgBCyD.js";import{s as B}from"../chunks/DflrDu60.js";import{i as D}from"../chunks/CoHz1Npk.js";import{s as A,r as H}from"../chunks/CsChzsNn.js";import{e as p}from"../chunks/CV5asq_h.js";import{b as L}from"../chunks/DicIaQeK.js";import{i as ea}from"../chunks/CQ-KNpQv.js";import{A as sa}from"../chunks/gz7YWXWY.js";import{b as N}from"../chunks/D73iepPs.js";var ta=C('<p class="err svelte-iv8lg3"> </p>'),la=C('<span class="loading svelte-iv8lg3"><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span> Entrando…</span>'),ia=C('<div class="page svelte-iv8lg3"><section class="auth svelte-iv8lg3" role="form" aria-labelledby="title-login"><div class="head svelte-iv8lg3"><h1 id="title-login" class="svelte-iv8lg3">Acceso</h1> <span class="pill svelte-iv8lg3">Área pública</span></div> <div class="body svelte-iv8lg3"><div class="inputRow svelte-iv8lg3"><label for="email" class="svelte-iv8lg3">Email</label> <div class="inputWrap svelte-iv8lg3"><input id="email" class="input svelte-iv8lg3" type="email" placeholder="tu@correo.com" autocomplete="email"/></div></div> <div class="inputRow svelte-iv8lg3"><label for="pass" class="svelte-iv8lg3">Contraseña</label> <div class="inputWrap svelte-iv8lg3"><input id="pass" class="input svelte-iv8lg3" placeholder="••••••••" autocomplete="current-password"/> <button type="button" class="toggle svelte-iv8lg3" aria-label="Mostrar u ocultar contraseña"> </button></div></div> <!> <div class="actions svelte-iv8lg3"><button class="btn primary svelte-iv8lg3"><!></button> <button class="btn svelte-iv8lg3" aria-label="Crear cuenta nueva">Crear cuenta</button></div></div> <div class="foot svelte-iv8lg3"><span class="help svelte-iv8lg3">¿Olvidaste tu contraseña? <a class="link svelte-iv8lg3">Recupérala</a></span> <span class="help svelte-iv8lg3">¿Problemas? <a class="link svelte-iv8lg3">Contáctanos</a></span></div></section></div>');function fa(T,q){Y(q,!1);let g=c(""),b=c(""),d=c(""),o=c(!1),u=c(!1);async function f(a){r(o,!0),r(d,"");try{const t=await fetch(`${sa}/auth/${a}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:l(g),password:l(b)}),credentials:"include",mode:"cors"});if(!t.ok)throw new Error(await t.text()||"Error");const O=await t.json();localStorage.setItem("access_token",O.access_token),window.location.href=`${N}/tutor/`}catch(t){r(d,t.message)}finally{r(o,!1)}}const P=a=>{a.key==="Enter"&&(a.preventDefault(),f("login"))};ea();var _=ia(),S=e(_),h=i(e(S),2),w=e(h),I=i(e(w),2),y=e(I);H(y),s(I),s(w);var k=i(w,2),M=i(e(k),2),v=e(M);H(v);var x=i(v,2),z=e(x,!0);s(x),s(M),s(k);var R=i(k,2);{var F=a=>{var t=ta(),O=e(t,!0);s(t),W(()=>B(O,l(d))),m(a,t)};D(R,a=>{l(d)&&a(F)})}var $=i(R,2),n=e($),G=e(n);{var Q=a=>{var t=la();m(a,t)},U=a=>{var t=aa("Entrar");m(a,t)};D(G,a=>{l(o)?a(Q):a(U,!1)})}s(n);var j=i(n,2);s($),s(h);var J=i(h,2),E=e(J),V=i(e(E));s(E);var K=i(E,2),X=i(e(K));A(X,"href","mailto:kitia.app@gmail.com"),s(K),s(J),s(S),s(_),W(()=>{A(v,"type",l(u)?"text":"password"),B(z,l(u)?"Ocultar":"Mostrar"),n.disabled=l(o),j.disabled=l(o),A(V,"href",`${N}/recuperar`)}),L(y,()=>l(g),a=>r(g,a)),p("keydown",y,P),L(v,()=>l(b),a=>r(b,a)),p("keydown",v,P),p("click",x,()=>r(u,!l(u))),p("click",n,()=>f("login")),p("click",j,()=>f("register")),m(T,_),Z()}export{fa as component};
