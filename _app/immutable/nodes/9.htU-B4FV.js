import"../chunks/DsnmJJEf.js";import"../chunks/uehYZzkF.js";import{av as Y,ay as O,aD as W,b as l,a as g,az as Z,aB as e,s as r,O as c,aA as i,aC as s,aF as aa}from"../chunks/oOC6CyD3.js";import{e as p,s as z}from"../chunks/Bj18uxIO.js";import{i as F}from"../chunks/C2ciDzbX.js";import{s as C,r as J,A as ea}from"../chunks/CdqO7dcH.js";import{b as K}from"../chunks/BqAu88Dq.js";import{i as sa}from"../chunks/BBFBmJEc.js";import{b as N}from"../chunks/C9vofX5_.js";var ta=O('<p class="err svelte-iv8lg3"> </p>'),la=O('<span class="loading svelte-iv8lg3"><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span><span class="dot svelte-iv8lg3"></span> Entrando…</span>'),ia=O('<div class="page svelte-iv8lg3"><section class="auth svelte-iv8lg3" role="form" aria-labelledby="title-login"><div class="head svelte-iv8lg3"><h1 id="title-login" class="svelte-iv8lg3">Acceso</h1> <span class="pill svelte-iv8lg3">Área pública</span></div> <div class="body svelte-iv8lg3"><div class="inputRow svelte-iv8lg3"><label for="email" class="svelte-iv8lg3">Email</label> <div class="inputWrap svelte-iv8lg3"><input id="email" class="input svelte-iv8lg3" type="email" placeholder="tu@correo.com" autocomplete="email"/></div></div> <div class="inputRow svelte-iv8lg3"><label for="pass" class="svelte-iv8lg3">Contraseña</label> <div class="inputWrap svelte-iv8lg3"><input id="pass" class="input svelte-iv8lg3" placeholder="••••••••" autocomplete="current-password"/> <button type="button" class="toggle svelte-iv8lg3" aria-label="Mostrar u ocultar contraseña"> </button></div></div> <!> <div class="actions svelte-iv8lg3"><button class="btn primary svelte-iv8lg3"><!></button> <button class="btn svelte-iv8lg3" aria-label="Crear cuenta nueva">Crear cuenta</button></div></div> <div class="foot svelte-iv8lg3"><span class="help svelte-iv8lg3">¿Olvidaste tu contraseña? <a class="link svelte-iv8lg3">Recupérala</a></span> <span class="help svelte-iv8lg3">¿Problemas? <a class="link svelte-iv8lg3">Contáctanos</a></span></div></section></div>');function ma(T,q){Y(q,!1);let m=c(""),b=c(""),d=c(""),o=c(!1),u=c(!1);async function f(a){r(o,!0),r(d,"");try{const t=await fetch(`${ea}/auth/${a}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:l(m),password:l(b)}),credentials:"include",mode:"cors"});if(!t.ok)throw new Error(await t.text()||"Error");const A=await t.json();localStorage.setItem("access_token",A.access_token),window.location.href=`${N}/tutor/`}catch(t){r(d,t.message)}finally{r(o,!1)}}const P=a=>{a.key==="Enter"&&(a.preventDefault(),f("login"))};sa();var _=ia(),S=e(_),h=i(e(S),2),y=e(h),R=i(e(y),2),w=e(R);J(w),s(R),s(y);var k=i(y,2),$=i(e(k),2),v=e($);J(v);var x=i(v,2),G=e(x,!0);s(x),s($),s(k);var j=i(k,2);{var H=a=>{var t=ta(),A=e(t,!0);s(t),W(()=>z(A,l(d))),g(a,t)};F(j,a=>{l(d)&&a(H)})}var B=i(j,2),n=e(B),L=e(n);{var Q=a=>{var t=la();g(a,t)},U=a=>{var t=aa("Entrar");g(a,t)};F(L,a=>{l(o)?a(Q):a(U,!1)})}s(n);var D=i(n,2);s(B),s(h);var I=i(h,2),E=e(I),V=i(e(E));s(E);var M=i(E,2),X=i(e(M));C(X,"href","mailto:kitia.app@gmail.com"),s(M),s(I),s(S),s(_),W(()=>{C(v,"type",l(u)?"text":"password"),z(G,l(u)?"Ocultar":"Mostrar"),n.disabled=l(o),D.disabled=l(o),C(V,"href",`${N}/recuperar`)}),K(w,()=>l(m),a=>r(m,a)),p("keydown",w,P),K(v,()=>l(b),a=>r(b,a)),p("keydown",v,P),p("click",x,()=>r(u,!l(u))),p("click",n,()=>f("login")),p("click",D,()=>f("register")),g(T,_),Z()}export{ma as component};
