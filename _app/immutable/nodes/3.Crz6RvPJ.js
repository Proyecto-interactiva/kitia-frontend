import"../chunks/DsnmJJEf.js";import"../chunks/D_JxtCvG.js";import{o as na}from"../chunks/B9ntrt2Q.js";import{aE as va,aF as da,aG as ba,aH as b,b as a,a as n,aI as ua,aJ as c,aK as o,s as C,O as A,aL as s,c as pa,f as R,u as d,aM as w,aN as ma,aO as _a}from"../chunks/H9qgBCyD.js";import{s as x}from"../chunks/DflrDu60.js";import{i as h}from"../chunks/CoHz1Npk.js";import{e as fa,i as ya}from"../chunks/Cg6mc7CJ.js";import{r as ha}from"../chunks/CsChzsNn.js";import{e as E}from"../chunks/CV5asq_h.js";import{s as ja}from"../chunks/DhZQgohg.js";import{b as ga}from"../chunks/DicIaQeK.js";import{i as wa}from"../chunks/CQ-KNpQv.js";import{b as z}from"../chunks/D73iepPs.js";import{A as xa}from"../chunks/gz7YWXWY.js";var ka=b('<div class="grid svelte-cbyojb" aria-busy="true" aria-live="polite"><div class="skeleton svelte-cbyojb"></div> <div class="skeleton svelte-cbyojb"></div></div>'),Ma=b('No encontramos evaluaciones que coincidan con ‚Äú<strong class="svelte-cbyojb"> </strong>‚Äù.',1),La=b('<div class="empty svelte-cbyojb"><!> <div style="margin-top:10px;" class="svelte-cbyojb"><button class="btn primary svelte-cbyojb">Crear una nueva</button></div></div>'),Ca=b('<p class="meta svelte-cbyojb"> </p>'),Aa=b('<p class="desc svelte-cbyojb"> </p>'),Ea=b('<div class="progress svelte-cbyojb" aria-label="Progreso"><div class="bar svelte-cbyojb"></div></div>'),za=b('<article class="card svelte-cbyojb"><div class="head svelte-cbyojb"><div class="svelte-cbyojb"><h3 class="title svelte-cbyojb"> </h3> <p class="meta svelte-cbyojb"> </p> <!></div></div> <!> <!> <div class="foot svelte-cbyojb"><div class="actions svelte-cbyojb"><button class="btn secondary svelte-cbyojb"><svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" style="vertical-align:middle;" class="svelte-cbyojb"><path d="M3 17.25V21h3.75l11.06-11.06a1 1 0 0 0 0-1.41l-2.34-2.34a1 1 0 0 0-1.41 0L3 17.25zM20.71 7.04a1 1 0 0 0 0-1.41l-2.34-2.34a1 1 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" fill="currentColor" class="svelte-cbyojb"></path></svg> Editar</button> <button class="btn svelte-cbyojb"><svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" style="vertical-align:middle;" class="svelte-cbyojb"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6zm7 1.5V8h5.5L13 3.5zM6 4h6v5a1 1 0 0 0 1 1h5v10a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4z" fill="currentColor" class="svelte-cbyojb"></path></svg> Ver resultados</button></div></div></article>'),Ba=b('<div class="grid svelte-cbyojb"></div>'),Va=b('<div class="page svelte-cbyojb"><div class="container svelte-cbyojb"><section class="hero svelte-cbyojb"><div class="svelte-cbyojb"><h2 class="svelte-cbyojb">¬°Hola!</h2> <p class="svelte-cbyojb">Revisa y contin√∫a con tus evaluaciones √©ticas anteriores.</p></div> <button class="btn primary svelte-cbyojb">+ Nueva evaluaci√≥n √©tica</button></section>  <div class="toolbar svelte-cbyojb"><div class="search svelte-cbyojb"><span aria-hidden="true" class="svelte-cbyojb">üîé</span> <input placeholder="Buscar por nombre, descripci√≥n, etapa o fecha‚Ä¶" class="svelte-cbyojb"/></div></div> <!></div></div>');function Ra(Q,U){va(U,!1);const k=A();let B=A([]),F=A(!0),u=A("");na(async()=>{try{const e=localStorage.getItem("access_token")||"",i=await fetch(`${xa}/evaluaciones/list`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},credentials:"include",mode:"cors"});if(!i.ok)throw new Error(await i.text());C(B,await i.json())}catch(e){console.error("Error cargando evaluaciones:",e)}finally{C(F,!1)}});const W=e=>new Date(e).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),I=e=>e.puntos!==void 0&&e.puntos_max?Math.round(e.puntos/e.puntos_max*100):e.puntuacion!==void 0?Math.max(0,Math.min(100,Math.round(e.puntuacion))):null;da(()=>(a(B),a(u)),()=>{C(k,a(B).filter(e=>{const i=H=>(H||"").toLowerCase().includes(a(u).toLowerCase());return i(e.nombre)||i(e.descripcion)||i(e.etapa)||new Date(e.createdAt).toLocaleDateString("es-CL").includes(a(u))}))}),ba(),wa();var V=Va(),N=o(V),$=o(N),X=c(o($),2);s($);var D=c($,2),P=o(D),q=c(o(P),2);ha(q),s(P),s(D);var Y=c(D,2);{var Z=e=>{var i=ka();n(e,i)},aa=e=>{var i=pa(),H=R(i);{var ea=m=>{var p=La(),M=o(p);{var t=v=>{var f=Ma(),y=c(R(f)),S=o(y,!0);s(y),ma(),w(()=>x(S,a(u))),n(v,f)},j=v=>{var f=_a("A√∫n no tienes evaluaciones.");n(v,f)};h(M,v=>{a(u)?v(t):v(j,!1)})}var _=c(M,2),L=o(_);s(_),s(p),E("click",L,()=>window.location.href=`${z}/tutor`),n(m,p)},ta=m=>{var p=Ba();fa(p,5,()=>a(k),ya,(M,t)=>{var j=za(),_=o(j),L=o(_),v=o(L),f=o(v,!0);s(v);var y=c(v,2),S=o(y);s(y);var sa=c(y,2);{var oa=r=>{var l=Ca(),g=o(l);s(l),w(()=>x(g,`Etapa: ${a(t),d(()=>a(t).etapa)??""}`)),n(r,l)};h(sa,r=>{a(t),d(()=>a(t).etapa)&&r(oa)})}s(L),s(_);var G=c(_,2);{var ra=r=>{var l=Aa(),g=o(l,!0);s(l),w(()=>x(g,(a(t),d(()=>a(t).descripcion)))),n(r,l)};h(G,r=>{a(t),d(()=>a(t).descripcion)&&r(ra)})}var O=c(G,2);{var ia=r=>{var l=Ea(),g=o(l);s(l),w(la=>ja(g,la),[()=>(a(t),d(()=>`width:${I(a(t))}%`))]),n(r,l)};h(O,r=>{a(t),d(()=>I(a(t))!==null)&&r(ia)})}var T=c(O,2),J=o(T),K=o(J),ca=c(K,2);s(J),s(T),s(j),w(r=>{x(f,(a(t),d(()=>a(t).nombre))),x(S,`Fecha: ${r??""}`)},[()=>(a(t),d(()=>W(a(t).createdAt)))]),E("click",K,()=>window.location.href=`${z}/evaluaciones/${a(t)._id}/checklist`),E("click",ca,()=>window.location.href=`${z}/evaluaciones/${a(t)._id}/resultados`),n(M,j)}),s(p),n(m,p)};h(H,m=>{a(k),d(()=>a(k).length===0)?m(ea):m(ta,!1)},!0)}n(e,i)};h(Y,e=>{a(F)?e(Z):e(aa,!1)})}s(N),s(V),E("click",X,()=>window.location.href=`${z}/evaluaciones/nueva`),ga(q,()=>a(u),e=>C(u,e)),n(Q,V),ua()}export{Ra as component};
